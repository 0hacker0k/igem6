<!doctype html> 
<html lang="zh-tw"> 
<head>
    <meta charset="UTF-8" />
    <title>Making your first Phaser 3 Game - Part 1</title>
    <script src="phaser-3.55.2/dist/phaser.js"></script>
    <script src="./js/lobby.js"></script>
    <script src="./js/stage.js"></script>
    <style type="text/css">
        body {
            margin: 10%;
        }
    </style>
</head>
<body>
<select onChange="changeLang(this.options[this.selectedIndex].value)">
    <option value="#">please choose your language</option>
    <option value="en">English</option>
    <option value="zh-tw">繁體中文</option>
    <option value="zh-cn">簡體中文</option>
</select>
<button onclick="load()">123123132</button>
<script type="text/javascript">
    var getUrlString = location.href;
    var url = new URL(getUrlString);
    //alert(location.host+location.pathname);
    var languege=url.searchParams.get('lang');
    if(languege==null)languege="en";
    //alert(languege);
    function changeLang(input){
        languege=input;
        location=location.protocol+"//"+location.host+location.pathname+"?lang="+languege;
    }
    var text=[];
    var langLoadComplete=0;
    let langueges="./languege/"+languege+".js";
    var head= document.getElementsByTagName('head')[0]; 
    var script= document.createElement('script'); 
    script.type= 'text/javascript'; 
    script.onload = script.onreadystatechange = function() { 
        if (!this.readyState || this.readyState === "loaded" || this.readyState === "complete" ) { 
            loadLanguege();
            script.onload = script.onreadystatechange = null; 
        }
    };
    script.src= langueges; 
    head.appendChild(script);
    function loadLanguege(){
        langLoadComplete=1;
        load();
    }
    var config;
    var score = 0;
    var scoreText;
    var game=null;
    var platforms;
    gameOver=false;
    function load(){
        if(game!=null)
            game.destroy(true, false);
        config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            physics: {//物理函式
                default: 'arcade',
                arcade: {
                    gravity: { y: 300 },
                    debug: false
                }
            },
            scene: {//場景函式
                preload: preload1,//預載入
                create: create1,//建立
                update: update1//更新
            }
        };
        game = new Phaser.Game(config);
    }
</script>

</body>
</html>